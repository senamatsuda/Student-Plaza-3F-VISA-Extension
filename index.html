<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>在留期間更新 必要書類ナビ</title>
  <style>
    :root { color-scheme: light; }
    body { font-family: system-ui, -apple-system, sans-serif; margin: 2rem; line-height: 1.6; background: #f6f7fb; }
    h1 { font-size: 1.6rem; margin-bottom: 0.2rem; }
    .card { max-width: 820px; padding: 1.5rem 1.75rem; border: 1px solid #e2e2e2; border-radius: 14px; box-shadow: 0 6px 20px rgba(0, 0, 0, 0.05); background: #fff; }
    label { display: block; font-weight: 600; margin-top: 1rem; margin-bottom: 0.35rem; }
    select { width: 100%; padding: 0.55rem; font-size: 1rem; border-radius: 8px; border: 1px solid #c6c6c6; background: #fff; }
    button { margin-top: 1.1rem; padding: 0.7rem 1.05rem; font-size: 1rem; border-radius: 10px; border: 0; background: #0069d9; color: #fff; cursor: pointer; box-shadow: 0 3px 10px rgba(0, 105, 217, 0.2); }
    button:disabled { background: #9ab9e8; cursor: not-allowed; box-shadow: none; }
    ul { padding-left: 1.2rem; }
    .muted { color: #555; }
    .hint { font-size: 0.95rem; margin-top: 0.6rem; color: #333; }
    .stack { display: grid; gap: 0.75rem; margin-top: 1.2rem; }
    .badge { display: inline-block; padding: 0.2rem 0.45rem; border-radius: 6px; background: #eef2ff; color: #223; font-size: 0.85rem; margin-left: 0.35rem; }
  </style>
</head>
<body>
  <div class="card">
    <h1>在留期間更新に必要な書類</h1>
    <p class="muted">身分・状況・奨学金区分を選ぶと、提出が必要な書類が表示されます。GitHub Pages 上でも単体で動作する静的版です。</p>

    <label for="status">身分</label>
    <select id="status">
      <option value="">選択してください</option>
    </select>

    <label for="scenario">状況</label>
    <select id="scenario" disabled>
      <option value="">身分を先に選んでください</option>
    </select>

    <label for="scholarship">奨学金区分（任意）<span class="badge">任意</span></label>
    <select id="scholarship">
      <option value="">選択なし</option>
    </select>

    <div class="hint">奨学金区分を選ぶと、該当する書類が追加で表示されます。</div>

    <button id="show" disabled>必要書類を表示</button>

    <div id="results" style="margin-top: 1.4rem;"></div>
  </div>

  <script>
    const COMMON_REQUIREMENTS = [
      "在留期間更新許可申請書（申請人等作成用の3枚 + 所属機関等作成用の2枚）",
      "提出書類一覧表、各在学証明書（両方提出必須。2025年1月申請分から提出が必須）",
      "成績証明書、在学証明書等（証明書のコピーはマスキングせずに提出）",
      "パスポート、在留カード（原本を持参・提示してください）",
      "6,000円分の収入印紙",
    ];

    const STATUS_RULES = {
      "正規生": [
        {
          label: "現学年・前学期在籍",
          requirements: [
            "外国人登録証明書（原本）",
            "成績証明書（前年度または前学期のもの）",
            "在学証明書（在籍期間の記載があるもの）",
          ],
        },
        {
          label: "前学期未履修（未受験）",
          requirements: [
            "外国人登録証明書（原本）",
            "経費支弁証明書（次のいずれか: 送金証明書／預金残高証明書／授業料免除許可書／奨学金受給証明書〈日本語訳付き〉)",
          ],
        },
        {
          label: "途中退学（日本語学校から転校）",
          requirements: [
            "外国人登録証明書（原本）",
            "退学証明書（日本語学校からのもの）",
            "在籍証明書（元学校。期間の記載があるもの）",
            "大学進学予定証明書（在学予定校）",
          ],
        },
      ],
      "研究生": [
        {
          label: "前学期も研究生として在籍",
          requirements: [
            "外国人登録証明書（原本または在留カードの両面コピー。所属学部等の支援室で発行）",
            "前学期の成績証明書（所属の支援室で発行）",
          ],
        },
        {
          label: "前学期に日本語学校へ在籍",
          requirements: [
            "外国人登録証明書（原本）",
            "日本語学校の在学証明書・成績証明書・出席／在籍証明書（日本語学校で発行）",
          ],
        },
        {
          label: "前学期に3科目以上を履修（10単位程度）",
          requirements: [
            "外国人登録証明書（原本）",
            "成績証明書（所属の支援室で発行）",
            "在学証明書（所属学部の支援室で発行）",
            "聴講・科目等履修に関する証明書（授業担当者の署名が入ったもの）",
          ],
        },
      ],
      "特別聴講学生": [
        {
          label: "大学院等へ進学予定（合格済）",
          requirements: [
            "合格通知書のコピーを提出してください",
            "前学期に履修がない場合: 経費支弁証明書（送金証明書など）",
          ],
        },
        {
          label: "前学期に履修あり",
          requirements: [
            "外国人登録証明書（原本）",
            "成績証明書（前学期のもの）",
            "在学証明書（所属の支援室で発行）",
          ],
        },
      ],
    };

    const SCHOLARSHIP_RULES = {
      "国費留学生": ["日本政府奨学金受給証明書（留学交流グループで発行）"],
      "日本政府以外の奨学金受給学生": ["奨学金受給証明書（原本。奨学金支援センターなどで発行）"],
      "予約採用奨学金（決定済み）": [
        "自費外国人留学生申請者: 申請用紙（奨学金支援センターで配布）",
        "推薦者記入用: 外国人留学生奨学金受給予定証明書（授業担当教員記入）",
      ],
      "予約採用奨学金（未決定・受給予定なし）": ["予約採用内定奨学金がない場合は提出不要です"],
      "奨学金なし": [],
    };

    const statusSelect = document.getElementById('status');
    const scenarioSelect = document.getElementById('scenario');
    const scholarshipSelect = document.getElementById('scholarship');
    const showButton = document.getElementById('show');
    const results = document.getElementById('results');

    function populateStatuses() {
      Object.keys(STATUS_RULES).forEach((status) => {
        const option = document.createElement('option');
        option.value = status;
        option.textContent = status;
        statusSelect.appendChild(option);
      });
    }

    function populateScholarships() {
      Object.keys(SCHOLARSHIP_RULES).forEach((key) => {
        const option = document.createElement('option');
        option.value = key;
        option.textContent = key;
        scholarshipSelect.appendChild(option);
      });
    }

    function refreshScenarios() {
      const status = statusSelect.value;
      scenarioSelect.innerHTML = '';
      if (!status) {
        const option = document.createElement('option');
        option.value = '';
        option.textContent = '身分を先に選んでください';
        scenarioSelect.appendChild(option);
        scenarioSelect.disabled = true;
        showButton.disabled = true;
        return;
      }

      STATUS_RULES[status].forEach((scenario) => {
        const option = document.createElement('option');
        option.value = scenario.label;
        option.textContent = scenario.label;
        scenarioSelect.appendChild(option);
      });
      scenarioSelect.disabled = false;
      showButton.disabled = !scenarioSelect.value;
    }

    function renderRequirements(requirements) {
      results.innerHTML = '';
      if (!requirements.length) {
        const empty = document.createElement('p');
        empty.textContent = '必要な書類はありません。';
        results.appendChild(empty);
        return;
      }

      const list = document.createElement('ul');
      requirements.forEach((item) => {
        const li = document.createElement('li');
        li.textContent = item;
        list.appendChild(li);
      });
      results.appendChild(list);
    }

    function showRequirements() {
      const status = statusSelect.value;
      const scenarioLabel = scenarioSelect.value;
      const scholarship = scholarshipSelect.value;
      if (!status || !scenarioLabel) {
        renderRequirements([]);
        return;
      }

      const scenario = STATUS_RULES[status].find((item) => item.label === scenarioLabel);
      const requirements = [
        ...COMMON_REQUIREMENTS,
        ...(scenario ? scenario.requirements : []),
        ...(scholarship ? (SCHOLARSHIP_RULES[scholarship] || []) : []),
      ];
      renderRequirements(requirements);
    }

    statusSelect.addEventListener('change', () => {
      refreshScenarios();
      showRequirements();
    });

    scenarioSelect.addEventListener('change', () => {
      showButton.disabled = !scenarioSelect.value;
    });

    scholarshipSelect.addEventListener('change', showRequirements);
    showButton.addEventListener('click', showRequirements);

    populateStatuses();
    populateScholarships();
  </script>
</body>
</html>
